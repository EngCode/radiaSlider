function Slider(a){function l(){var a=Math.sqrt(Math.pow(event.layerX-k.x0,2)+Math.pow(event.layerY-k.y0,2));for(var b in k.sliders)if(k.sliders.hasOwnProperty(b)){var c=k.sliders[b];if(Math.abs(a-c.radius)<=k.scaleWidth/2){var d=c;break}}return d?d:null}function m(a){a.preventDefault(),k.selectedSlider=l(),k.selectedSlider&&k.the_body.addEventListener("mousemove",s,!1)}function n(){k.the_body.removeEventListener("mousemove",s,!1),k.currentSlider=k.selectedSlider}function o(a){k.currentSlider&&l()&&k.currentSlider.id!=l().id||k.selectedSlider&&s()}function p(a){a.preventDefault(),k.selectedSlider=l(),k.selectedSlider&&s()}function q(a){a.preventDefault(),s()}function r(a){a.preventDefault(),k.the_body.removeEventListener("mousemove",s,!1)}function s(){k.selectedSlider&&(x=event.layerX,y=event.layerY,k.selectedSlider.endAngle=Math.atan2(y-k.y0,x-k.y0),k.selectedSlider.ang_degrees=360*(k.selectedSlider.endAngle+Math.PI/2>0?k.selectedSlider.endAngle+Math.PI/2:2*Math.PI+k.selectedSlider.endAngle+Math.PI/2)/(2*Math.PI),k.selectedSlider.normalizedValue=k.selectedSlider.ang_degrees*(k.selectedSlider.max-k.selectedSlider.min)/360+Math.round(k.selectedSlider.min),t())}function t(){k.context.clearRect(0,0,k.container.width,k.container.height);for(var a in k.sliders)if(k.sliders.hasOwnProperty(a)){var b=k.sliders[a];k.drawScale(b),k.drawData(b),k.drawArrow(b),k.drawKnob(b),b.onValueChangeCallback({rad:b.endAngle,deg:b.ang_degrees,value:b.normalizedValue})}}var a=document.getElementById(a),b=document.body,c=a.getContext("2d"),d=a.width/2,e=a.height/2,f=35,g=35,h=35,i=1.5*Math.PI+1e-6,j=1.5*Math.PI+1e-4;this.sliders={},this.scaleWidth=f,this.fillWidth=g,this.knobWidth=h,this.startAngle=i,this.endAngle=j,this.container=a,this.the_body=b,this.context=c,this.x0=d,this.y0=e,this.selectedSlider=null,this.currentSlider=null;var k=this;this.container.addEventListener("mousedown",m,!1),k.the_body.addEventListener("mouseup",n,!1),this.container.addEventListener("click",o,!1),this.container.addEventListener("touchstart",p,!1),this.container.addEventListener("touchmove",q,!1),this.container.addEventListener("touchend",r,!1)}Slider.prototype.addSlider=function(a){this.sliders[a.id]={id:a.id,container:document.getElementById(a.container),color:a.color||"#104b63",min:a.min||0,max:a.max||100,radius:a.radius||100,startAngle:this.startAngle,endAngle:this.endAngle,onValueChangeCallback:a.changed||function(a){},ang_degrees:0,normalizedValue:a.min||0};var b=this.sliders[a.id];this.drawScale(this.sliders[a.id]),b.endAngle=1.5*Math.PI+1e-6,this.drawData(this.sliders[a.id]),this.drawArrow(this.sliders[a.id]),this.drawKnob(this.sliders[a.id]),b.onValueChangeCallback({rad:b.endAngle,deg:b.ang_degrees,value:b.normalizedValue})},Slider.prototype.drawScale=function(a){for(var b=a.container.getContext("2d"),c=0;c<=2*Math.PI;c+=Math.PI/6)b.beginPath(),b.strokeStyle="#eeeeee",b.arc(this.x0,this.y0,a.radius,c,c+Math.PI/6,!1),b.lineWidth=this.scaleWidth,b.stroke();b.beginPath(),b.strokeStyle="#eeeeee",b.arc(this.x0,this.y0,this.scaleWidth/2,0,2*Math.PI,!1),b.lineWidth=1,b.fillStyle="#eeeeee",b.fill()},Slider.prototype.drawData=function(a){var b=a.container.getContext("2d");b.beginPath(),b.strokeStyle=a.color,b.arc(this.x0,this.y0,a.radius,a.startAngle,a.endAngle,!1),b.lineWidth=this.fillWidth,b.stroke()},Slider.prototype.drawArrow=function(a){var b=a.container.getContext("2d");b.beginPath(),b.moveTo(this.x0,this.y0-a.radius+this.scaleWidth/2),b.lineTo(this.x0,this.y0-this.scaleWidth-a.radius+this.scaleWidth/2),b.lineTo(this.x0+this.scaleWidth/4,this.y0-this.scaleWidth/2-a.radius+this.scaleWidth/2),b.fillStyle="#eeeeee",b.fill()},Slider.prototype.drawKnob=function(a){var b=a.container.getContext("2d");b.beginPath(),b.strokeStyle="#eb879c",b.arc(Math.cos(a.endAngle)*a.radius+this.x0,Math.sin(a.endAngle)*a.radius+this.y0,this.knobWidth/2,0,2*Math.PI,!1),b.lineWidth=1,b.fillStyle="#eb879c",b.fill(),b.beginPath(),b.strokeStyle="yellow",b.arc(Math.cos(a.endAngle)*a.radius+this.x0,Math.sin(a.endAngle)*a.radius+this.y0,this.scaleWidth/10,0,2*Math.PI,!1),b.lineWidth=1,b.fillStyle="yellow",b.fill()};