function Slider(a){this.sliders={},this.scaleWidth=35,this.fillWidth=35,this.knobWidth=35,this.startAngle=1.5*Math.PI+1e-6,this.endAngle=1.5*Math.PI-1e-6,this.container=document.getElementById(a),this.the_body=document.body,this.context=this.container.getContext("2d"),this.x0=this.container.width/2,this.y0=this.container.height/2,this.MouseX=0,this.MouseY=0,this.selectedSlider=null,this.currentSlider=null,this.rotationEventListener=this._rotation.bind(this),this.container.addEventListener("mousedown",this._handleMouseDown.bind(this),!1),this.the_body.addEventListener("mouseup",this._handleMouseUp.bind(this),!1),this.container.addEventListener("click",this._handleClick.bind(this),!1),this.container.addEventListener("touchstart",this._handleTouch.bind(this),!1),this.container.addEventListener("touchmove",this._handleMove.bind(this),!1),this.container.addEventListener("touchend",this._handleEnd.bind(this),!1)}Slider.prototype.addSlider=function(a){this.sliders[a.id]={id:a.id,container:document.getElementById(a.container),color:a.color||"#104b63",min:a.min||0,max:a.max||100,radius:a.radius||100,startAngle:this.startAngle,endAngle:this.endAngle,onValueChangeCallback:a.changed||function(a){},ang_degrees:0,normalizedValue:a.min||0,step:a.step||1};var b=this.sliders[a.id];this.setSliderValue(b.id,a.min)},Slider.prototype.drawScale=function(a){for(var b=a.container.getContext("2d"),c=0;c<=2*Math.PI;c+=Math.PI/6)b.beginPath(),b.strokeStyle="#eeeeee",b.arc(this.x0,this.y0,a.radius,c,c+Math.PI/6,!1),b.lineWidth=this.scaleWidth,b.stroke()},Slider.prototype.drawCenterDot=function(){var a=this.container.getContext("2d");a.beginPath(),a.strokeStyle="#eeeeee",a.arc(this.x0,this.y0,this.scaleWidth/2,0,2*Math.PI,!1),a.lineWidth=1,a.fillStyle="#eeeeee",a.fill()},Slider.prototype.drawData=function(a){var b=a.container.getContext("2d");b.beginPath(),b.strokeStyle=a.color,b.arc(this.x0,this.y0,a.radius,a.startAngle,a.endAngle,!1),b.lineWidth=this.fillWidth,b.stroke()},Slider.prototype.drawArrow=function(a){var b=a.container.getContext("2d");b.beginPath(),b.moveTo(this.x0,this.y0-a.radius+this.scaleWidth/2),b.lineTo(this.x0,this.y0-this.scaleWidth-a.radius+this.scaleWidth/2),b.lineTo(this.x0+this.scaleWidth/4,this.y0-this.scaleWidth/2-a.radius+this.scaleWidth/2),b.fillStyle="#eeeeee",b.fill()},Slider.prototype.drawKnob=function(a){var b=a.container.getContext("2d");b.beginPath(),b.strokeStyle="#eb879c",b.arc(Math.cos(a.endAngle)*a.radius+this.x0,Math.sin(a.endAngle)*a.radius+this.y0,this.knobWidth/2,0,2*Math.PI,!1),b.lineWidth=1,b.fillStyle="#eb879c",b.fill(),b.beginPath(),b.strokeStyle="yellow",b.arc(Math.cos(a.endAngle)*a.radius+this.x0,Math.sin(a.endAngle)*a.radius+this.y0,this.scaleWidth/10,0,2*Math.PI,!1),b.lineWidth=1,b.fillStyle="yellow",b.fill()},Slider.prototype.calculateAngles=function(a,b){var c=this.selectedSlider.max,d=this.selectedSlider.min,e=this.selectedSlider.step,f=Math.atan2(b-this.y0,a-this.y0),g=this.radToDeg(this.normalizeTan(f)),h=this.normalizeTan(f)*(c-d)/(2*Math.PI)+d;h=(h/e>>0)*e,this.selectedSlider.endAngle=f,this.selectedSlider.ang_degrees=g,this.selectedSlider.normalizedValue=h},Slider.prototype.radToDeg=function(a){return 180*a/Math.PI},Slider.prototype.normalizeTan=function(a){var b=a+Math.PI/2>0?a+Math.PI/2:2*Math.PI+a+Math.PI/2;return b},Slider.prototype.setSliderValue=function(a,b){var c=this.sliders[a];b<=c.min?(c.endAngle=this.startAngle,c.ang_degrees=0,c.normalizedValue=0):b>=c.max?(c.endAngle=this.endAngle,c.ang_degrees=360,c.normalizedValue=c.max):(c.endAngle=2*Math.PI*(b-c.min)/(c.max-c.min)-Math.PI/2,c.ang_degrees=this.radToDeg(this.normalizeTan(c.endAngle)),c.normalizedValue=b),this.drawAll()},Slider.prototype.drawAll=function(){this.context.clearRect(0,0,this.container.width,this.container.height);for(var a in this.sliders)if(this.sliders.hasOwnProperty(a)){var b=this.sliders[a];this.drawScale(b),this.drawData(b),this.drawArrow(b),this.drawKnob(b),b.onValueChangeCallback({rad:b.endAngle,deg:b.ang_degrees,value:b.normalizedValue})}this.drawCenterDot()},Slider.prototype.calculateUserCursor=function(){var a=this.container.getBoundingClientRect();event.touches?(this.MouseX=event.touches[0].clientX-a.left,this.MouseY=event.touches[0].clientY-a.top):(this.MouseX=event.clientX-a.left,this.MouseY=event.clientY-a.top)},Slider.prototype.getSelectedSlider=function(){this.calculateUserCursor();var a=Math.sqrt(Math.pow(this.MouseX-this.x0,2)+Math.pow(this.MouseY-this.y0,2));for(var b in this.sliders)if(this.sliders.hasOwnProperty(b)){var c=this.sliders[b];if(Math.abs(a-c.radius)<=this.scaleWidth/2){var d=c;break}}return d?d:null},Slider.prototype._handleMouseDown=function(a){a.preventDefault(),this.selectedSlider=this.getSelectedSlider(),this.selectedSlider&&this.the_body.addEventListener("mousemove",this.rotationEventListener,!1)},Slider.prototype._handleMouseUp=function(a){a.preventDefault(),this.the_body.removeEventListener("mousemove",this.rotationEventListener,!1),this.currentSlider=this.selectedSlider},Slider.prototype._handleClick=function(a){this.selectedSlider=this.getSelectedSlider(),this.currentSlider&&this.getSelectedSlider()&&this.currentSlider.id!=this.getSelectedSlider().id||this.selectedSlider&&this._rotation()},Slider.prototype._handleTouch=function(a){a.preventDefault(),this.selectedSlider=this.getSelectedSlider(),this.selectedSlider&&this._rotation()},Slider.prototype._handleMove=function(a){a.preventDefault(),this.selectedSlider&&this._rotation()},Slider.prototype._handleEnd=function(a){a.preventDefault(),this.the_body.removeEventListener("mousemove",this.rotationEventListener,!1)},Slider.prototype._rotation=function(){this.calculateUserCursor(),this.calculateAngles(this.MouseX,this.MouseY),this.drawAll()};